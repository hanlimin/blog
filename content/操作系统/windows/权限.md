# 权限

## NFTS权限

`System.Security.AccessControl.FileSystemRights`

### 标准权限

|                |                      |                                                              |
| :------------: | -------------------- | ------------------------------------------------------------ |
|    完全控制    | Full Control         | 该权限允许用户对文件夹、子文件夹、文件进行全权控制，如修改资源的权限、获取资源的所有者、删除资源的权限等，拥有完全控制权限就等于拥有了其他所有的权限 |
|      修改      | Modify               | 该权限允许用户修改或删除资源，同时让用户拥有写入及读取和运行权限。包含ReadAndExecute、 Write、Delete权限 |
|   读取和执行   | Read & Execute       | 该权限允许用户拥有读取和列出资源目录的权限，另外也允许用户在资源中进行移动和遍历，这使得用户能够直接访问子文件夹与文件，即使用户没有权限访问这个路径。包含Read、ExecuteFile权限 |
| 列出文件夹内容 | List Folder Contents | 该权限允许用户查看资源中的子文件夹与文件名称                 |
|      读取      | Read                 | 该权限允许用户查看该文件夹中的文件以及子文件夹，也允许查看该文件夹的属性、所有者和拥有的权限等。包含ReadData、ReadExtendedAttributes、ReadAttributes、 ReadPermissions权限 |
|      写入      | Write                | 该权限允许用户在该文件夹中创建新的文件和子文件夹，也可以改变文件夹的属性、查看文件夹的所有者和权限等。包含WriteData、 AppendData,、WriteExtendedAttributes、WriteAttributes权限 |

### 特别权限

- 遍历文件夹和执行文件
- 列出文件夹和读出数据
- 读取属性
- 读取扩展属性
- 创建文件和写入数据
- 创建文件夹和附加数据

|                      |                              |                                                              |
| -------------------- | ---------------------------- | ------------------------------------------------------------ |
| 遍历文件夹和执行文件 | Traverse                     | 该权限允许用户在文件夹及其子文件夹之间移动（遍历），即使这些文件夹本身没有访问权限。对于文件来说，拥了这项权限后，用户可以执行该程序文件。但是，如果仅为文件夹设置了这项权限的话，并不会让用户对其中的文件带上"执行"的权限； |
| 列出文件夹和读出数据 | ListDirectory                | 该权限允许用户查看文件夹中的文件名称、子文件夹名称和查看文件中的数据 |
| 读取属性             | ReadAttributes               | 该权限允许用户查看文件或文件夹的属性（如系统、只读、隐藏等属性） |
| 读取扩展属性         | ReadExtendedAttributes       | 该权限允许查看文件或文件夹的扩展属性，这些扩展属性通常由程序所定义，并可以被程序修改 |
| 创建文件和写入数据   | CreateFiles                  | 该权限允许用户在文件夹中创建新文件，也允许将数据写入现有文件并覆盖现有文件中的数据 |
| 创建文件夹和附加数据 | CreateDirectories            | 该权限允许用户在文件夹中创建新文件夹或允许用户在现有文件的末尾添加数据，但不能对文件现有的数据进行覆盖、修改，也不能删除数据 |
| 写入属性             | WriteAttributes              | 该权限允许用户改变文件或文件夹的属性                         |
| 写入扩展属性         | WriteExtendedAttributes      | 该权限允许用户对文件或文件夹的扩展属性进行修改               |
| 删除子文件夹及文件   | DeleteSubdirectoriesAndFiles | 该权限允许用户删除文件夹中的子文件夹或文件，即使在这些子文件夹和文件上没有设置删除权限 |
| 删除                 | Delete                       | 该权限允许用户删除当前文件夹和文件，如果用户在该文件或文件夹上没有删除权限，但是在其父级的文件夹上有删除子文件及文件夹权限，那么就仍然可以删除它 |
| 读取权限             | ReadPermissions              | 该权限允许用户读取文件或文件夹的权限列表                     |
| 更改权限             | ChangePermissions            | 该权限允许用户改变文件或文件夹上的现有权限                   |
| 取得所有权           | TakeOwnership                | 该权限允许用户获取文件或文件夹的所有权，一旦获取了所有权，用户就可以对文件或文件夹进行全权控制 |

标准权限将一些常用的系统权限选项比较笼统地组成6种"套餐型"的权限，即：完全控制、修改、读取和运行、列出文件夹目录、读取、写入。
在大多数的情况下，"标准权限"是可以满足管理需要的，但对于权限管理要求严格的环境，它往往就不能令管理员们满意了，如只想赋予某用户有建立文件夹的权限，却没有建立文件的权限；如只能删除当前目录中的文件，却不能删除当前目录中的子目录的权限等......这个时候，就可以让拥有所有权限选项的"特别权限"来大显身手了。也就是说，特别权限不再使用"套餐型"，而是使用可以允许用户进行"菜单型"的细节化权限管理选择了。

### 资源复制或移动时权限的变化与处理

在权限的应用中，不可避免地会遇到设置了权限后的资源需要复制或移动的情况，那么这个时候资源相应的权限会发生怎样的变化呢？下面来了解一下：

⑴复制资源时

在复制资源时，原资源的权限不会发生变化，而新生成的资源，将继承其目标位置父级资源的权限。

⑵移动资源时

在移动资源时，一般会遇到两种情况，一是如果资源的移动发生在同一驱动器内，那么对象保留本身原有的权限不变（包括资源本身权限及原先从父级资源中继承的权限）；二是如果资源的移动发生在不同的驱动器之间，那么不仅对象本身的权限会丢失，而且原先从父级资源中继承的权限也会被从目标位置的父级资源继承的权限所替代。实际上，移动操作就是首先进行资源的复制，然后从原有位置删除资源的操作。

⑶非NTFS分区

上述复制或移动资源时产生的权限变化只是针对NTFS分区上而言的，如果将资源复制或移动到非NTFS分区（如FAT16/FAT32分区）上，那么所有的权限均会自动全部丢失

## 共享权限

只要是共享出来的文件夹就一定具有此权限。如该文件夹存在于NTFS分区中，那么它将同时具有NTFS权限与共享权限，如果这个资源同时拥有NTFS和共享两种权限，那么系统中对权限的具体实施将以两种权限中的"较严格的权限"为准──这也是"拒绝优于允许"原则的一种体现！

①完全控制：允许用户创建、读取、写入、重命名，另外，也可以修改该文件夹中的NTFS访问权限和夺取所有权；

②更改：允许用户读取、写入、重命名，但不能创建新文件；

③读取：允许用户读取当前文件夹的文件和子文件夹，但是不能进行写入或删除操作。

## 程序权限

一、是组策略中软件限制策略的设计；

二、是临时分配程序文件使用权限的设计。

⑴软件限制策略

在"运行"栏中输入 "gpedit.msc"命令打开组策略窗口后，在"计算机配置"→"Windows设置"→"安全设置"分支中，右键选中"软件限制策略"分支，在弹出的快捷菜单中选择新建一个策略后，就可以从"软件限制策略"分支下新出现的"安全级别"中看到有两种安全级别的存在了。

这三条安全级别对于程序文件与用户权限之前是有密切联系的：

①不允许的：从其解释中可以看出，无论用户的访问权如何，软件都不会运行；

②基本用户：允许程序访问一般用户可以访问的资源，但没有管理员的访问权。

③不受限的：这是默认的安全级别，其解释为 "软件访问权由用户的访问权来决定"。显然，之所以在系统中可以设置各种权限，是因为有这个默认安全策略在背后默默支持的缘故。如果想把"不允许的"安全级别设置为默认状态，只需双击进入其属性界面后点击"设为默认值"按钮即可。

⑵临时分配程序文件

为什么要临时分配程序文件的管理权限呢？这是因为在Windows中，有许多很重要的程序都是要求用户具有一定的管理权限才能使用的，因此在使用权限不足以使用某些程序的账户时，为了能够使用程序，我们就需要为自己临时分配一个访问程序的管理权限了。为程序分配临时管理权限的方法很简单：右键点击要运行的程序图标，在弹出的快捷菜单中选择"运行方式"，在打开的"运行身份"对话框中选中"下列用户"选项，在"用户名"和"密码"右侧的文本框中指定用户及密码即可。

显然，这个临时切换程序文件管理权限的设计是十分有必要的，它可以很好地起到保护系统的目的。

## 注册表权限



## 工具

### ICACLS 