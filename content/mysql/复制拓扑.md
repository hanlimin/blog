### 复制拓扑

#### 一主库多备库

<img src="https://i.loli.net/2020/08/27/sAyx9GtrIFd8lhX.png"/>

- 为不同的角色使用不同的备库。例如：添加不同的索引、使用不同的储存引擎。
- 把一台备库当作待用的主库，除了复制没有其它的数据传输。
- 将一台备库放在远程数据中心，用作灾难恢复。
- 延迟一个或多个备库，已备灾难恢复。
- 使用其中一个备库，用作备份、培训、开发或者测试使用服务器。

#### 主主复制

<img src="https://i.loli.net/2020/08/27/KhGlR4BNrstUy5n.png"/>

- 两个处在不同地理位置的数据库，且都需要可写。两个可写的服务器会导致冲突，MySQL 5.0增加了新特性，就是配置`auto_increment`和`auto_increment_offset`，这可以让MySQL自动为INSERT语句选择互不冲突的值，使得这种配置稍微安全了点。

#### 主库、分发主库以及备库

<img src="https://i.loli.net/2020/08/27/C5lSkEsGxgLKJrW.png" width=80%/>

将主库的负载转移到分发主库上。分发主库的唯一目的就是提取和提供主库的二进制日志。为了避免在分发主库上做实际的查询，可以将它的表修改为blackhole储存引擎。