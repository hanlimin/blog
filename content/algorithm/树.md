---
title: 树
date: "2020-12-10 23:10:25"
modifyDate: "2020-12-10 23:10:25"
draft: true
---
### 二叉查找树

1. 若任意节点的左子树不空，则左子树上所有节点的值均小于它的根节点的值；
2. 若任意节点的右子树不空，则右子树上所有节点的值均大于它的根节点的值；
3. 任意节点的左、右子树也分别为二叉查找树；
4. 没有键值相等的节点。

### 平衡二叉树

每个节点的左右两子树高度差都不超过一的二叉查找树。

有严格的平衡保证，查询速度快。

### 红黑树

1. 节点是红色或黑色。
2. 根节点是黑色。
3. 每个叶子节点都是黑色的空节点（NIL节点）。
4. 每个红节点必须有两个黑色的子节点。
5. 从任意节点到其每个叶子的所有路径都包含相同数目的黑色节点。

插入和删除可能打破规则，调整方法：

- 变色

- 旋转

    - 左旋转

         逆时针旋转红黑树的两个节点，使得父节点被自己的右孩子取代，而自己成为自己的左孩子。 

    - 右旋转

         顺时针旋转红黑树的两个节点，使得父节点被自己的左孩子取代，而自己成为自己的右孩子 

与平衡二叉树相比，查询慢一点，插入和删除快一点。 旋转次数比AVL少。

### B树

一颗B树T具有以下性质的有根树（根为T.root）：

1. 每个节点x有下面的属性：

    a. x.n，当前储存在节点x中的关键字数量

    b. x.n个关键字本身$x.key_1,x.key_2，\cdots，x.key_{x.n}$，以非降序存放，使得$x.key_1\le x.key_2 \le \cdots \le x.key_{x.n}$。

    c. x.leaf，一个布尔值，如果x是叶节点，则为TRUE；如果x为内部节点，则为FALSE。

2. 每个内部节点x还包含x.n+1个指向其孩子的指针$x.c_1,x.c_2,\cdots ,x.c_{n+1}$。叶节点没有孩子，所有它们的$c_i$属性没有定义。

3. 关键字$x.key_i$对储存在各子树的关键字范围加以分割：如果$k_i$为任意一个储存在以$x.c_i$为根的子树的关键字，那么
    $$
    \large k_1 \le x.key_1 \le k_2 \le \cdots \le x.key_{x.n} \le k_{x.n+1}
    $$

4. 每个页节点具有相同的深度，即树的高度h。

5. 每个节点所包含的关键字个数有上界和下界。用一个被称为B树的最小度数（minmum degree）的固定整数$t\geqslant2$来表示这些界：

    a. 除了根节点以外的每个节点必须至少有$t-1$个关键字。因此，除了根节点以外每个内部节点至少有t个孩子。如果树非空，根节点至少有一个关键字。

    b. 每个节点至多可包含$2t-1$个关键字。因此，一个内部节点至多有2t个孩子。当一个节点恰好有$2t-1$个关键字时，称该节点是满的。

性质：

对于任意一颗包含n个关键字、高度为h、最小度$t\geqslant2$的B树，有
$$
\large h\le \log_t\frac{n+1}{2}
$$

#### 背景

##### 磁盘IO与预读

磁盘读取依靠的是机械运动，分为寻道时间、旋转延迟、传输时间三个部分，这三个部分耗时相加就是一次磁盘IO的时间，大概9ms左右。这个成本是访问内存的十万倍左右；正是由于磁盘IO是非常昂贵的操作，所以计算机操作系统对此做了优化：预读；每一次IO时，不仅仅把当前磁盘地址的数据加载到内存，同时也把相邻数据也加载到内存缓冲区中。因为局部预读原理说明：当访问一个地址数据的时候，与其相邻的数据很快也会被访问到。每次磁盘IO读取的数据我们称之为一页（page）。一页的大小与操作系统有关，一般为4k或者8k。这也就意味着读取一页内数据的时候，实际上发生了一次磁盘IO。

### B+树

B树的一个变体。

1. 非叶子节点只存储键值信息。
2. 数据记储存在在叶子节点中。
3. 所有叶子节点之间相连。

优点：

- 由于B+树在内部节点上不含数据信息，因此在内存页中能够存放更多的key。 数据存放的更加紧密，具有更好的空间局部性。因此访问叶子几点上关联的数据也具有更好的缓存命中率。
- B+树的叶子结点都是相链的，因此对整棵树的遍历只需要一次线性遍历叶子结点即可。而且由于数据顺序排列并且相连，所以便于区间查找和搜索。而B树则需要进行每一层的递归遍历。相邻的元素可能在内存中不相邻，所以缓存命中性没有B+树好。

### B*树

B*树是B+树的变体，非根和非叶子结点再增加指向兄弟的指针。

### R树

R树是B树在高维空间的扩展。

1. 除非它是根结点之外，所有叶子结点包含有m至M个记录索引（条目）。作为根结点的叶子结点所具有的记录个数可以少于m。通常，m=M/2。

2. 对于所有在叶子中存储的记录（条目），I是最小的可以在空间中完全覆盖这些记录所代表的点的矩形（注意：此处所说的“矩形”是可以扩展到高维空间的）。

3. 每一个非叶子结点拥有m至M个孩子结点，除非它是根结点。

4. 对于在非叶子结点上的每一个条目，i是最小的可以在空间上完全覆盖这些条目所代表的店的矩形（同性质2）。

5. 所有叶子结点都位于同一层，因此R树为平衡树

### Treap

Tree + Heap。Treap 是一棵拥有键值、优先级两种权值的二叉搜索树 。



### 笛卡尔树

笛卡尔树是一种特定二叉树数据结构，可由数列构造，在范围最值查、范围top k查询等问题上有广泛应用。它具有堆的有序性，中序遍历可以输出原数列。 
